-- SQLBook: Code
-- Active: 1702949509256@@127.0.0.1@5432@d_clone@public
-- CREATE DATABASE D_CLONE;

CREATE TABLE USERS(
    ID SERIAL PRIMARY KEY,
    FIRST_NAME VARCHAR(255) NOT NULL,
    LAST_NAME VARCHAR(255) NOT NULL,
    USER_NAME VARCHAR(64) NOT NULL UNIQUE,
    EMAIL VARCHAR(255) NOT NULL,
    PASSWORD TEXT NOT NULL,
    BIRTH_DATE DATE NOT NULL,
    NEWSLETTER BOOLEAN DEFAULT FALSE,
    CREATION_DATE TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    ONLINE_STATUS SMALLINT,
    ACCOUNT_STATUS SMALLINT,
        CONSTRAINT CHECK_ONLINE_STATUS CHECK(ONLINE_STATUS BETWEEN 0 AND 4),
        CONSTRAINT CHECK_ACCOUNT_STATUS CHECK(ACCOUNT_STATUS BETWEEN 0 AND 2)
);

CREATE TABLE SESSIONS(
    ID SERIAL PRIMARY KEY,
    USER_ID BIGINT,
    ACTIVITY_TYPE SMALLINT,
    DATE_TIME TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        CONSTRAINT USERS_SESSIONS_FK FOREIGN KEY (USER_ID) REFERENCES USERS (ID)
);